(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{gEu8:function(e,n,t){"use strict";t.r(n),t.d(n,"CategoryModule",function(){return E});var a=t("iInd"),i=t("PCNd"),o=t("ofXK"),c=t("q5vz"),r=t("fXoL"),s=t("2AjE"),l=t("R2Cy"),b=t("haRT"),g=t("WJhm"),m=t("66zS"),d=t("phDe"),u=t("px0D"),z=t("s7LF"),p=t("GaVp"),h=t("Jp/u"),f=t("+CSB"),y=t("AytR"),T=t("nYR2"),C=t("JXeA"),v=t("NFMk"),S=t("wf2+"),U=t("tYkK"),A=t("jTf7"),P=t("gaRz");function M(e,n){if(1&e&&(r.Ub(0,"nz-option",13),r.Ub(1,"div",14),r.Ub(2,"p"),r.Jc(3),r.Tb(),r.Pb(4,"img",15),r.Tb(),r.Tb()),2&e){const e=n.$implicit;r.mc("nzLabel",e.categoryName)("nzValue",e),r.Ab(3),r.Kc(e.categoryName),r.Ab(1),r.mc("src",e.image,r.yc)}}function w(e,n){if(1&e){const e=r.Vb();r.Pb(0,"nz-divider"),r.Ub(1,"div",16),r.Pb(2,"input",17,18),r.Ub(4,"a",19),r.bc("click",function(){r.wc(e);const n=r.uc(3);return r.ec(2).addItem(n)}),r.Pb(5,"i",20),r.Jc(6," Add item"),r.Tb(),r.Tb()}}function O(e,n){if(1&e){const e=r.Vb();r.Sb(0),r.Ub(1,"form",2),r.Ub(2,"nz-form-item"),r.Ub(3,"nz-form-label",3),r.Jc(4,"Select Category"),r.Tb(),r.Ub(5,"nz-form-control",4),r.Ub(6,"nz-select",5),r.bc("ngModelChange",function(n){return r.wc(e),r.ec().changeCategory(n)}),r.Hc(7,M,5,4,"nz-option",6),r.Tb(),r.Hc(8,w,7,0,"ng-template",null,7,r.Ic),r.Tb(),r.Tb(),r.Ub(10,"nz-form-item"),r.Ub(11,"nz-form-label",8),r.Jc(12,"Category Image"),r.Tb(),r.Ub(13,"nz-form-control",9),r.Ub(14,"nz-upload",10),r.bc("nzFileListChange",function(n){return r.wc(e),r.ec().fileList=n})("nzChange",function(n){return r.wc(e),r.ec().handleChange(n)}),r.Ub(15,"button",11),r.Pb(16,"i",12),r.Jc(17,"Click to Upload"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Rb()}if(2&e){const e=r.uc(9),n=r.ec();r.Ab(1),r.mc("formGroup",n.baseForm),r.Ab(2),r.mc("nzSpan",7),r.Ab(2),r.mc("nzSpan",14),r.Ab(1),r.mc("nzDropdownRender",e)("nzLoading",n.isLoadingCategoryInSelect),r.Ab(1),r.mc("ngForOf",n.categories),r.Ab(4),r.mc("nzSpan",7),r.Ab(2),r.mc("nzSpan",14),r.Ab(1),r.mc("nzFileList",n.fileList)("nzDisabled",n.fileList.length>0)("nzFileType","image/png,image/jpeg,image/gif,image/bmp")("nzSpan",6)("nzAction",n.backEndUrl)}}let F=(()=>{class e extends f.a{constructor(e,n,t){super(e),this.categoryService=e,this.formBuilder=n,this.messageService=t,this.isVisible=!1,this.modalTitle="ADD CATEGORY",this.cancelModalEvent=new r.n,this.okModalEvent=new r.n,this.isHaveFile=!1,this.categories=[],this.backEndUrl=y.a.productServiceUrl+"/api/upload",this.fileList=[],this.isLoadingCategoryInSelect=!1,this.handleChange=e=>{this.isHaveFile=!1,this.fileList.forEach(e=>{"done"===e.status&&(this.isHaveFile=!0)})}}ngOnInit(){this.buildForm(),this.getCategoryAllStore()}getCategoryAllStore(){this.isLoadingCategoryInSelect=!0,this.categoryService.getAllStore().pipe(Object(T.a)(()=>this.isLoadingCategoryInSelect=!1)).subscribe(e=>{"OK"===e.code&&(this.categories=e.data)})}buildForm(){this.baseForm=this.formBuilder.group({categoryName:[null,z.r.required]})}cancelModal(){super.cancel(this.cancelModalEvent),this.fileList=[]}submitForm(){const e=this.baseForm.get("categoryName").value;let n;n=-1==e.id?{categoryName:e.categoryName,image:this.fileList[0].response.data[0]}:{categoryName:e.categoryName},super.create(n,this.okModalEvent,this.messageService),this.fileList=[],this.getCategoryAllStore()}changeCategory(e){if(this.fileList=[],-1!==e.id){let n={uid:e.id.toString(),url:e.image,name:"image.png"};this.fileList.push(n),this.isHaveFile=!0}}addItem(e){-1===this.categories.findIndex(n=>n.categoryName==e.value)&&e.value&&(this.categories=[...this.categories,{id:-1,categoryName:e.value,image:""}],e.value=null)}}return e.\u0275fac=function(n){return new(n||e)(r.Ob(s.a),r.Ob(z.e),r.Ob(C.b))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-category-modal"]],inputs:{isVisible:"isVisible",modalTitle:"modalTitle",category:"category"},outputs:{cancelModalEvent:"cancelModalEvent",okModalEvent:"okModalEvent"},features:[r.xb],decls:2,vars:5,consts:[["nzOkText","OK","nzClassName","form-modal",3,"nzVisible","nzTitle","nzClosable","nzOkDisabled","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-form","",3,"formGroup"],["nzFor","sizeName",3,"nzSpan"],["nzErrorTip","Please input your Category name!",3,"nzSpan"],["formControlName","categoryName","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a Category",3,"nzDropdownRender","nzLoading","ngModelChange"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["renderTemplate",""],[3,"nzSpan"],[1,"form-upload-image",3,"nzSpan"],["nzName","files",3,"nzFileList","nzDisabled","nzFileType","nzSpan","nzAction","nzFileListChange","nzChange"],["nz-button","",1,"upload-btn"],["nz-icon","","nzType","upload"],["nzCustomContent","",3,"nzLabel","nzValue"],[1,"select-category-item"],["height","30px","alt","",3,"src"],[1,"input-container"],["type","text","nz-input",""],["inputElement",""],[1,"add-item",3,"click"],["nz-icon","","nzType","plus"]],template:function(e,n){1&e&&(r.Ub(0,"nz-modal",0),r.bc("nzVisibleChange",function(e){return n.isVisible=e})("nzOnCancel",function(){return n.cancelModal()})("nzOnOk",function(){return n.submitForm()}),r.Hc(1,O,18,13,"ng-container",1),r.Tb()),2&e&&r.mc("nzVisible",n.isVisible)("nzTitle",n.modalTitle)("nzClosable",!1)("nzOkDisabled",n.baseForm.invalid||!n.isHaveFile)("nzOkLoading",n.isLoadingButton)},directives:[v.a,v.b,z.s,z.n,S.b,z.h,U.c,S.c,U.a,S.d,S.a,A.b,z.m,z.g,o.n,P.a,p.a,h.a,g.a,m.a,A.a,u.a],styles:[".select-category-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.select-category-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.select-category-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:20px;width:25px;border:1px solid rgb(171 163 163)}"]}),e})();var L=t("C/7j"),k=t("SHEi");function V(e,n){if(1&e){const e=r.Vb();r.Ub(0,"div",13),r.Ub(1,"app-category-modal",14),r.bc("cancelModalEvent",function(n){return r.wc(e),r.ec().closeModal(n)})("okModalEvent",function(n){return r.wc(e),r.ec().closeModal(n)}),r.Tb(),r.Ub(2,"button",15),r.bc("click",function(){return r.wc(e),r.ec().showModal()}),r.Pb(3,"i",16),r.Tb(),r.Tb()}if(2&e){const e=r.ec();r.Ab(1),r.mc("category",e.selectedData)("isVisible",e.isShowModal)}}const N=function(e,n){return{odd:e,even:n}};function I(e,n){if(1&e){const e=r.Vb();r.Ub(0,"tr",17),r.Ub(1,"td",4),r.Jc(2),r.Tb(),r.Ub(3,"td",4),r.Jc(4),r.Tb(),r.Ub(5,"td",4),r.Pb(6,"img",18),r.Tb(),r.Ub(7,"td",19),r.Ub(8,"button",20),r.bc("nzOnConfirm",function(){r.wc(e);const t=n.$implicit;return r.ec().delete(t.id)}),r.Jc(9,"Delete"),r.Pb(10,"i",21),r.Tb(),r.Tb(),r.Tb()}if(2&e){const e=n.$implicit;r.mc("ngClass",r.qc(4,N,n.odd,n.even)),r.Ab(2),r.Kc(e.id),r.Ab(2),r.Kc(e.categoryName),r.Ab(2),r.mc("nzSrc",e.image)}}const x=[{path:"",component:(()=>{class e extends c.a{constructor(e,n){super(e),this.categoryService=e,this.utilitiesService=n,this.onQueryParamsChange=e=>{this.baseParams.filters=[{key:"sizeName",value:this.searchValue}],super.onQueryParamsChangeFromParent(e)}}ngOnInit(){this.isAdmin="Admin"===this.utilitiesService.getRole()}searchByName(){this.baseParams.filters=[{key:"categoryName",value:this.searchValue}],super.search()}}return e.\u0275fac=function(n){return new(n||e)(r.Ob(s.a),r.Ob(l.a))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-category-list"]],features:[r.xb],decls:24,vars:13,consts:[["class","table-operations",4,"ngIf"],["nzBordered","","nzTableLayout","fixed",3,"nzFrontPagination","nzTotal","nzPageSize","nzPageIndex","nzLoading","nzData","nzQueryParams"],["sortTable",""],["nzAlign","center","nzColumnKey","id",3,"nzSortFn"],["nzAlign","center"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],[3,"ngClass",4,"ngFor","ngForOf"],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],[1,"table-operations"],[3,"category","isVisible","cancelModalEvent","okModalEvent"],["nzType","primary","nz-button","",1,"add-btn",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[3,"ngClass"],["height","50","nz-image","","nz-image","",1,"category-img",3,"nzSrc"],["nzAlign","center",1,"btn-action"],["nz-button","","nzType","primary","nzPopconfirmOverlayClassName","delete-confirm-card","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this category?","nzPopconfirmPlacement","left","nzDanger","",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,n){if(1&e&&(r.Hc(0,V,4,2,"div",0),r.Ub(1,"nz-table",1,2),r.bc("nzQueryParams",function(e){return n.onQueryParamsChange(e)}),r.Ub(3,"thead"),r.Ub(4,"tr"),r.Ub(5,"th",3),r.Jc(6,"Id"),r.Tb(),r.Ub(7,"th",4),r.Jc(8,"Category Name "),r.Ub(9,"nz-filter-trigger",5),r.bc("nzVisibleChange",function(e){return n.isShowSearchInput=e}),r.Pb(10,"i",6),r.Tb(),r.Tb(),r.Ub(11,"th",4),r.Jc(12,"Image"),r.Tb(),r.Ub(13,"th",4),r.Jc(14,"Action"),r.Tb(),r.Tb(),r.Tb(),r.Ub(15,"tbody"),r.Hc(16,I,11,7,"tr",7),r.Tb(),r.Tb(),r.Ub(17,"nz-dropdown-menu",null,8),r.Ub(19,"div",9),r.Ub(20,"div",10),r.Ub(21,"input",11),r.bc("ngModelChange",function(e){return n.searchValue=e}),r.Tb(),r.Ub(22,"button",12),r.bc("click",function(){return n.searchByName()}),r.Jc(23," Search "),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&e){const e=r.uc(2),t=r.uc(18);r.mc("ngIf",!n.isAdmin),r.Ab(1),r.mc("nzFrontPagination",!1)("nzTotal",n.total)("nzPageSize",n.baseParams.pageSize)("nzPageIndex",n.baseParams.pageIndex)("nzLoading",n.isLoading)("nzData",n.listData),r.Ab(4),r.mc("nzSortFn",!0),r.Ab(4),r.mc("nzVisible",n.isShowSearchInput)("nzActive",n.searchValue.length>0)("nzDropdownMenu",t),r.Ab(7),r.mc("ngForOf",e.data),r.Ab(5),r.mc("ngModel",n.searchValue)}},directives:[o.o,b.d,b.i,b.j,b.c,b.h,b.a,b.g,b.b,g.a,m.a,b.f,o.n,d.c,u.a,z.d,z.m,z.o,p.a,h.a,F,o.m,L.a,k.a],styles:[".category-img[_ngcontent-%COMP%]{max-width:100px}"]}),e})()}];let E=(()=>{class e{}return e.\u0275mod=r.Mb({type:e}),e.\u0275inj=r.Lb({factory:function(n){return new(n||e)},imports:[[o.c,i.a,P.b,a.f.forChild(x)]]}),e})()}}]);