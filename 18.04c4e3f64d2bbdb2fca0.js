(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{sjYV:function(e,t,n){"use strict";n.r(t),n.d(t,"ProductModule",function(){return re});var i=n("PCNd"),r=n("nYR2"),o=n("AG10"),a=n("s7LF"),c=n("AytR"),l=n("fXoL"),s=n("F0gW"),d=n("vpSu"),b=n("tYkK"),u=n("wf2+"),p=n("jTf7"),g=n("ofXK"),h=n("haRT"),z=n("px0D"),m=n("GaVp"),f=n("Jp/u"),S=n("WJhm"),I=n("66zS");function T(e,t){if(1&e&&l.Pb(0,"nz-option",12),2&e){const e=t.$implicit;l.lc("nzLabel",e.sizeName)("nzValue",e.id)}}function v(e,t){if(1&e&&l.Pb(0,"nz-option",12),2&e){const e=t.$implicit;l.lc("nzLabel",e.colorName)("nzValue",e.id)}}function y(e,t){if(1&e){const e=l.Vb();l.Ub(0,"tr"),l.Ub(1,"td",10),l.Ic(2),l.Tb(),l.Ub(3,"td",10),l.Ic(4),l.Tb(),l.Ub(5,"td",10),l.Ub(6,"input",13),l.bc("ngModelChange",function(e){return t.$implicit.quantity=e}),l.Tb(),l.Tb(),l.Ub(7,"td",10),l.Ub(8,"button",14),l.bc("click",function(){l.vc(e);const n=t.$implicit;return l.ec().deleteProductDetail(n)}),l.Pb(9,"i",15),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit;l.Ab(2),l.Jc(e.size),l.Ab(2),l.Jc(e.color),l.Ab(2),l.lc("ngModel",e.quantity)}}let C=(()=>{class e{constructor(e,t){this.colorService=e,this.sizeService=t,this.listProductDetail=[],this.isLoadingSizeInSelect=!0,this.isLoadingColorInSelect=!0,this.listColor=[],this.listSize=[],this.params=new o.a}ngOnInit(){this.loadColor(),this.loadSize()}loadColor(){this.params.pageSize=50,this.colorService.getAll(this.params).pipe(Object(r.a)(()=>this.isLoadingColorInSelect=!1)).subscribe(e=>{"OK"==e.code&&(this.listColor=e.data.content)})}loadSize(){this.params.pageSize=50,this.sizeService.getAll(this.params).pipe(Object(r.a)(()=>this.isLoadingSizeInSelect=!1)).subscribe(e=>{"OK"==e.code&&(this.listSize=e.data.content)})}generateProductDetail(){this.listProductDetail=[],this.listColor.filter(e=>this.colorIdsSelected.includes(e.id)).forEach(e=>{this.listSize.filter(e=>this.sizeIdsSelected.includes(e.id)).forEach(t=>{this.listProductDetail.push({id:null,quantity:0,colorId:e.id,color:e.colorName,sizeId:t.id,size:t.sizeName})})})}getProductDetails(){return this.listProductDetail}deleteProductDetail(e){this.listProductDetail=this.listProductDetail.filter(t=>t.colorId!==e.colorId||t.sizeId!==e.sizeId),0===this.listProductDetail.length&&(this.colorIdsSelected=[],this.sizeIdsSelected=[])}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(s.a),l.Ob(d.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-product-option"]],inputs:{listProductDetail:"listProductDetail",sizeIdsSelected:"sizeIdsSelected",colorIdsSelected:"colorIdsSelected"},decls:31,vars:15,consts:[[1,"option-value","section"],[1,"content"],[1,"column"],[3,"nzSpan"],["nzErrorTip","Please input your size!",3,"nzSpan"],["nzMode","multiple","nzAllowClear","","nzShowSearch","","nzPlaceHolder","Select a size",3,"nzLoading","nzMaxTagCount","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzErrorTip","Please input your color!",3,"nzSpan"],["nzMode","multiple","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a color",3,"nzLoading","nzMaxTagCount","ngModel","ngModelChange"],["nzBordered","",3,"nzShowPagination","nzData"],["nzAlign","center"],[4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["type","number","nz-input","","placeholder","Quantity",3,"ngModel","ngModelChange"],["nz-button","","nzDanger","","nzType","primary",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"h4"),l.Ic(2,"Option Value:"),l.Tb(),l.Ub(3,"div",1),l.Ub(4,"div",2),l.Ub(5,"nz-form-item"),l.Ub(6,"nz-form-label",3),l.Ic(7,"Size"),l.Tb(),l.Ub(8,"nz-form-control",4),l.Ub(9,"nz-select",5),l.bc("ngModelChange",function(e){return t.sizeIdsSelected=e})("ngModelChange",function(){return t.generateProductDetail()}),l.Gc(10,T,1,2,"nz-option",6),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(11,"div",2),l.Ub(12,"nz-form-item"),l.Ub(13,"nz-form-label",3),l.Ic(14,"Color"),l.Tb(),l.Ub(15,"nz-form-control",7),l.Ub(16,"nz-select",8),l.bc("ngModelChange",function(e){return t.colorIdsSelected=e})("ngModelChange",function(){return t.generateProductDetail()}),l.Gc(17,v,1,2,"nz-option",6),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(18,"nz-table",9),l.Ub(19,"thead"),l.Ub(20,"tr"),l.Ub(21,"th",10),l.Ic(22,"Size"),l.Tb(),l.Ub(23,"th",10),l.Ic(24,"Color"),l.Tb(),l.Ub(25,"th",10),l.Ic(26,"Quantity"),l.Tb(),l.Ub(27,"th",10),l.Ic(28,"Action"),l.Tb(),l.Tb(),l.Tb(),l.Ub(29,"tbody"),l.Gc(30,y,10,3,"tr",11),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Ab(6),l.lc("nzSpan",6),l.Ab(2),l.lc("nzSpan",14),l.Ab(1),l.lc("nzLoading",t.isLoadingSizeInSelect)("nzMaxTagCount",3)("ngModel",t.sizeIdsSelected),l.Ab(1),l.lc("ngForOf",t.listSize),l.Ab(3),l.lc("nzSpan",6),l.Ab(2),l.lc("nzSpan",14),l.Ab(1),l.lc("nzLoading",t.isLoadingColorInSelect)("nzMaxTagCount",3)("ngModel",t.colorIdsSelected),l.Ab(1),l.lc("ngForOf",t.listColor),l.Ab(1),l.lc("nzShowPagination",!1)("nzData",t.listProductDetail),l.Ab(12),l.lc("ngForOf",t.listProductDetail))},directives:[b.c,u.c,b.a,u.d,u.a,p.b,a.m,a.o,g.n,h.d,h.i,h.j,h.c,h.h,h.a,h.f,p.a,a.p,z.a,a.d,m.a,f.a,S.a,I.a],styles:[".option-value.section[_ngcontent-%COMP%]{border:none}"]}),e})();var U=n("2AjE"),P=n("WRNG"),O=n("IheW"),A=n("JIr8"),L=n("lJxs"),w=n("LRne");let F=(()=>{class e{constructor(e){this.httpClient=e}getById(e){return this.httpClient.get(`${c.a.productServiceUrl}/api/product/${e}`).pipe(Object(A.a)(e=>Object(w.a)(e.error)))}create(e){return this.httpClient.post(c.a.productServiceUrl+"/api/product/create",e).pipe(Object(A.a)(e=>Object(w.a)(e.error)))}update(e){return this.httpClient.put(c.a.productServiceUrl+"/api/product",e).pipe(Object(A.a)(e=>Object(w.a)(e.error)))}delete(e,t){let n=(new O.g).append("page",""+(t.pageIndex-1)).append("pageSize",""+t.pageSize);return null!=t.sortField&&(n=n.append("sortField",""+t.sortField).append("sortOrder",""+t.sortOrder)),t.filters.length>0&&t.filters.forEach(e=>{n=n.append(e.key,e.value)}),this.httpClient.delete(`${c.a.productServiceUrl}/api/product/${e}`,{params:n}).pipe(Object(A.a)(e=>Object(w.a)(e.error)))}getAll(e,t){let n=(new O.g).append("page",""+(e.pageIndex-1)).append("pageSize",""+e.pageSize);return null!=e.sortField&&(n=n.append("sortField",""+e.sortField).append("sortOrder",""+e.sortOrder)),e.filters.length>0&&e.filters.forEach(e=>{n=n.append(e.key,e.value)}),this.httpClient.post(c.a.productServiceUrl+"/api/product",null!=t?t:{},{params:n}).pipe(Object(L.a)(e=>(e.data.content.forEach(e=>{0==e.productImages.length&&e.productImages.push({image:"https://drive.google.com/thumbnail?id=1KXVcuCEi-aYgrJXkUwV_RODDh5cT5qHv"})}),e)),Object(A.a)(e=>Object(w.a)(e.error)))}deleteImage(e){return this.httpClient.delete(`${c.a.productServiceUrl}/api/product/image/${e}`).pipe(Object(A.a)(e=>Object(w.a)(e.error)))}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(O.c))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=n("JXeA"),D=n("iInd"),N=n("gaRz"),V=n("mrSG"),B=n("NFMk");const E=function(){return{width:"100%"}};function j(e,t){if(1&e&&l.Pb(0,"img",7),2&e){const e=l.ec();l.lc("src",e.previewImage,l.xc)("ngStyle",l.nc(2,E))}}let x=(()=>{class e{constructor(e){this.productService=e,this.backEndUrl=c.a.productServiceUrl+"/api/upload",this.listImageChange=new l.n,this.previewImage="",this.previewVisible=!1,this.handlePreview=e=>Object(V.a)(this,void 0,void 0,function*(){e.url||e.preview||(e.preview=yield function(e){return new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)})}(e.originFileObj)),this.previewImage=e.url||e.preview,this.previewVisible=!0}),this.handleChange=e=>{this.listImageChange.emit(this.listImage)},this.removeFile=e=>(this.productService.deleteImage(e.id).subscribe(e=>{}),!0)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(F))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-product-image"]],inputs:{listImage:"listImage"},outputs:{listImageChange:"listImageChange"},decls:13,vars:9,consts:[[1,"product-image","section"],[1,"clearfix"],["nzName","files","nzListType","picture-card",3,"nzAction","nzMultiple","nzFileList","nzRemove","nzShowButton","nzPreview","nzFileListChange","nzChange"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzVisible","nzContent","nzFooter","nzOnCancel"],["modalContent",""],[3,"src","ngStyle"]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"h4"),l.Ic(2,"Product Images:"),l.Tb(),l.Ub(3,"nz-form-item"),l.Ub(4,"div",1),l.Ub(5,"nz-upload",2),l.bc("nzFileListChange",function(e){return t.listImage=e})("nzChange",function(e){return t.handleChange(e)}),l.Ub(6,"div"),l.Pb(7,"i",3),l.Ub(8,"div",4),l.Ic(9,"Upload"),l.Tb(),l.Tb(),l.Tb(),l.Ub(10,"nz-modal",5),l.bc("nzOnCancel",function(){return t.previewVisible=!1}),l.Gc(11,j,1,3,"ng-template",null,6,l.Hc),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.tc(12);l.Ab(5),l.lc("nzAction",t.backEndUrl)("nzMultiple",!0)("nzFileList",t.listImage)("nzRemove",t.removeFile)("nzShowButton",t.listImage.length<8)("nzPreview",t.handlePreview),l.Ab(5),l.lc("nzVisible",t.previewVisible)("nzContent",e)("nzFooter",null)}},directives:[b.c,u.c,N.a,S.a,I.a,B.a,g.p],styles:[""]}),e})();var k=n("fb/r");function G(e,t){if(1&e&&l.Pb(0,"nz-option",31),2&e){const e=t.$implicit;l.lc("nzLabel",e.categoryName)("nzValue",e.id)}}function $(e,t){1&e&&(l.Sb(0),l.Ic(1," Please input your price! "),l.Rb())}function R(e,t){1&e&&(l.Sb(0),l.Ic(1," The min value is 0 "),l.Rb())}function _(e,t){if(1&e&&(l.Gc(0,$,2,0,"ng-container",32),l.Gc(1,R,2,0,"ng-container",32)),2&e){const e=t.$implicit;l.lc("ngIf",e.hasError("required")),l.Ab(1),l.lc("ngIf",e.hasError("min"))}}function J(e,t){if(1&e&&l.Pb(0,"nz-option",31),2&e){const e=t.$implicit;l.lc("nzLabel",e.brandName)("nzValue",e.id)}}const K=function(e){return{isLoading:e}};let q=(()=>{class e{constructor(e,t,n,i,r,a){this.formBuilder=e,this.categoryService=t,this.brandService=n,this.productService=i,this.messageService=r,this.activatedRoute=a,this.backEndUrl=c.a.productServiceUrl+"/api/product/import",this.isLoadingCategoryInSelect=!0,this.isLoadingBrandInSelect=!0,this.isLoadingProductEdit=!1,this.isLoadingButtonSubmit=!1,this.params=new o.a,this.listImage=[],this.listProductDetail=[],this.sizeIdsSelected=[],this.colorIdsSelected=[]}ngOnInit(){this.buildForm(),this.loadCategory(),this.loadBrand(),this.activatedRoute.params.subscribe(e=>{e.productId&&(this.productId=e.productId,this.loadProductEdit(this.productId))})}loadProductEdit(e){this.isLoadingProductEdit=!0,this.productService.getById(e).pipe(Object(r.a)(()=>this.isLoadingProductEdit=!1)).subscribe(e=>{if("OK"==e.code){const t=e.data;this.productForm.controls.productName.setValue(t.productName),this.productForm.controls.price.setValue(t.price),this.productForm.controls.categoryId.setValue(t.categoryId),this.productForm.controls.brandId.setValue(t.brandId),this.productForm.controls.description.setValue(t.description),this.listImage=t.productImages.map((e,t)=>({uid:t,id:e.id,url:e.image,name:"image.png"})),this.listProductDetail=[...t.productDetails],this.loadColorSizeSelected(t.productDetails)}})}loadColorSizeSelected(e){const t=new Set,n=new Set;e.forEach(e=>{t.add(e.sizeId),n.add(e.colorId)}),this.colorIdsSelected=[...n],this.sizeIdsSelected=[...t]}buildForm(){this.productForm=this.formBuilder.group({productName:[null,a.r.required],price:[null,[a.r.required,a.r.min(0)]],brandId:[null,a.r.required],categoryId:[null,a.r.required],description:[null]})}loadCategory(){this.params.pageSize=50,this.categoryService.getAll(this.params).pipe(Object(r.a)(()=>this.isLoadingCategoryInSelect=!1)).subscribe(e=>{"OK"==e.code&&(this.listCategory=e.data.content)})}loadBrand(){this.params.pageSize=50,this.brandService.getAll(this.params).pipe(Object(r.a)(()=>this.isLoadingBrandInSelect=!1)).subscribe(e=>{"OK"==e.code&&(this.listBrand=e.data.content)})}submitForm(){let e={id:null,categoryName:null,brandName:null,description:this.productForm.get("description").value,productName:this.productForm.get("productName").value,price:this.productForm.get("price").value,categoryId:this.productForm.get("categoryId").value,brandId:this.productForm.get("brandId").value,productDetails:this.productOption.getProductDetails(),productImages:[],images:[]};this.listImage.forEach(t=>{"done"===t.status&&e.images.push(null==this.productId||void 0===t.url?t.response.data[0]:t.url)}),this.isLoadingButtonSubmit=!0,null!=this.productId?(e.id=this.productId,this.productService.update(e).pipe(Object(r.a)(()=>this.isLoadingButtonSubmit=!1)).subscribe(e=>{"OK"==e.code&&this.messageService.create("success","Update product successfully!")})):this.productService.create(e).pipe(Object(r.a)(()=>this.isLoadingButtonSubmit=!1)).subscribe(e=>{"OK"==e.code&&(this.messageService.create("success","Create product successfully!"),this.productForm.reset(),this.listProductDetail=[],this.listImage=[])})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(a.e),l.Ob(U.a),l.Ob(P.a),l.Ob(F),l.Ob(M.b),l.Ob(D.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-product-detail"]],viewQuery:function(e,t){if(1&e&&l.Lc(C,!0),2&e){let e;l.sc(e=l.cc())&&(t.productOption=e.first)}},decls:54,vars:30,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["target","_blank","href","https://drive.google.com/file/d/1yPRKV0JVhKOEe1YeYt4bSjY7GChizRtX/view?usp=sharing"],[3,"nzAction"],["nz-button",""],["nz-icon","","nzType","upload"],["nz-form","",3,"formGroup"],[1,"base-info","section"],[1,"content"],[1,"column"],["nzFor","productName",3,"nzSpan"],["nzErrorTip","Please input your product name!",3,"nzSpan"],["nz-input","","type","text","formControlName","productName"],["nzErrorTip","Please input your category name!",3,"nzSpan"],["formControlName","categoryId","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a category",3,"nzLoading"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzFor","price",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nz-input","","type","number","formControlName","price"],["priceErrorTpl",""],["nzErrorTip","Please input your price!",3,"nzSpan"],["formControlName","brandId","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a brand",3,"nzLoading"],["nzFor","description",3,"nzSpan"],["nzErrorTip","Please input your description!",3,"nzSpan"],["rows","4","nz-input","","formControlName","description"],[3,"listImage","listImageChange"],[3,"listProductDetail","colorIdsSelected","sizeIdsSelected"],[1,"btn-submit"],["nz-button","","nzType","primary",3,"nzLoading","disabled","click"],["nzSimple","",3,"ngClass","nzSpinning"],[3,"nzLabel","nzValue"],[4,"ngIf"]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"p"),l.Ic(4,"You can create product with import excel: "),l.Ub(5,"a",3),l.Ic(6,"Template"),l.Tb(),l.Tb(),l.Tb(),l.Ub(7,"div",2),l.Ub(8,"nz-upload",4),l.Ub(9,"button",5),l.Pb(10,"i",6),l.Ic(11,"Upload"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"form",7),l.Ub(13,"div",8),l.Ub(14,"h4"),l.Ic(15,"Basic Information:"),l.Tb(),l.Ub(16,"div",9),l.Ub(17,"div",10),l.Ub(18,"nz-form-item"),l.Ub(19,"nz-form-label",11),l.Ic(20,"Product Name"),l.Tb(),l.Ub(21,"nz-form-control",12),l.Pb(22,"input",13),l.Tb(),l.Tb(),l.Ub(23,"nz-form-item"),l.Ub(24,"nz-form-label",11),l.Ic(25,"Category"),l.Tb(),l.Ub(26,"nz-form-control",14),l.Ub(27,"nz-select",15),l.Gc(28,G,1,2,"nz-option",16),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(29,"div",10),l.Ub(30,"nz-form-item"),l.Ub(31,"nz-form-label",17),l.Ic(32,"Price"),l.Tb(),l.Ub(33,"nz-form-control",18),l.Pb(34,"input",19),l.Gc(35,_,2,2,"ng-template",null,20,l.Hc),l.Tb(),l.Tb(),l.Ub(37,"nz-form-item"),l.Ub(38,"nz-form-label",17),l.Ic(39,"Brand"),l.Tb(),l.Ub(40,"nz-form-control",21),l.Ub(41,"nz-select",22),l.Gc(42,J,1,2,"nz-option",16),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(43,"nz-form-item"),l.Ub(44,"nz-form-label",23),l.Ic(45,"Description"),l.Tb(),l.Ub(46,"nz-form-control",24),l.Pb(47,"textarea",25),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(48,"app-product-image",26),l.bc("listImageChange",function(e){return t.listImage=e}),l.Tb(),l.Pb(49,"app-product-option",27),l.Ub(50,"div",28),l.Ub(51,"button",29),l.bc("click",function(){return t.submitForm()}),l.Ic(52,"Save change"),l.Tb(),l.Tb(),l.Pb(53,"nz-spin",30),l.Tb()),2&e){const e=l.tc(36);l.Ab(1),l.lc("nzGutter",24),l.Ab(1),l.lc("nzSpan",18),l.Ab(5),l.lc("nzSpan",6),l.Ab(1),l.mc("nzAction",t.backEndUrl),l.Ab(4),l.lc("formGroup",t.productForm),l.Ab(7),l.lc("nzSpan",6),l.Ab(2),l.lc("nzSpan",14),l.Ab(3),l.lc("nzSpan",6),l.Ab(2),l.lc("nzSpan",14),l.Ab(1),l.lc("nzLoading",t.isLoadingCategoryInSelect),l.Ab(1),l.lc("ngForOf",t.listCategory),l.Ab(3),l.lc("nzSpan",6),l.Ab(2),l.lc("nzSpan",14)("nzErrorTip",e),l.Ab(5),l.lc("nzSpan",6),l.Ab(2),l.lc("nzSpan",14),l.Ab(1),l.lc("nzLoading",t.isLoadingBrandInSelect),l.Ab(1),l.lc("ngForOf",t.listBrand),l.Ab(2),l.lc("nzSpan",3),l.Ab(2),l.lc("nzSpan",19),l.Ab(2),l.lc("listImage",t.listImage),l.Ab(1),l.lc("listProductDetail",t.listProductDetail)("colorIdsSelected",t.colorIdsSelected)("sizeIdsSelected",t.sizeIdsSelected),l.Ab(2),l.lc("nzLoading",t.isLoadingButtonSubmit)("disabled",t.productForm.invalid),l.Ab(2),l.lc("ngClass",l.oc(28,K,t.isLoadingProductEdit))("nzSpinning",t.isLoadingProductEdit)}},directives:[b.c,b.a,N.a,m.a,f.a,S.a,I.a,a.s,a.n,u.b,a.h,u.c,u.d,u.a,z.a,a.d,a.m,a.g,p.b,g.n,a.p,x,C,k.a,g.m,p.a,g.o],styles:[".container[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;height:100%}.btn-submit[_ngcontent-%COMP%]{float:right;margin:20px 0 20px 20px}"]}),e})();class H{constructor(){this.productName=null,this.price=null,this.categoryName=null,this.brandName=null}}var Y=n("q5vz"),Q=n("C/7j"),W=n("phDe"),X=n("SHEi");function Z(e,t){if(1&e&&l.Pb(0,"nz-option",20),2&e){const e=t.$implicit;l.lc("nzLabel",e.categoryName)("nzValue",e.categoryName)}}function ee(e,t){if(1&e&&l.Pb(0,"nz-option",20),2&e){const e=t.$implicit;l.lc("nzLabel",e.brandName)("nzValue",e.brandName)}}const te=function(e,t){return{odd:e,even:t}};function ne(e,t){if(1&e){const e=l.Vb();l.Ub(0,"tr",21),l.Ub(1,"td",9),l.Ic(2),l.Tb(),l.Ub(3,"td",9),l.Ic(4),l.Tb(),l.Ub(5,"td",9),l.Ic(6),l.Tb(),l.Ub(7,"td",9),l.Ic(8),l.Tb(),l.Ub(9,"td",9),l.Ic(10),l.fc(11,"currency"),l.Tb(),l.Ub(12,"td",9),l.Ub(13,"img",22),l.bc("click",function(){l.vc(e);const n=t.$implicit;return l.ec().showListImage(n.productImages)}),l.Tb(),l.Tb(),l.Ub(14,"td",23),l.Ub(15,"button",24),l.bc("nzOnConfirm",function(){l.vc(e);const n=t.$implicit;return l.ec().delete(n.id)}),l.Ic(16,"Delete"),l.Pb(17,"i",25),l.Tb(),l.Ub(18,"button",26),l.bc("click",function(){l.vc(e);const n=t.$implicit;return l.ec().editProduct(n)}),l.Ic(19,"Edit"),l.Pb(20,"i",27),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit;l.lc("ngClass",l.pc(12,te,t.odd,t.even)),l.Ab(2),l.Jc(e.id),l.Ab(2),l.Jc(e.productName),l.Ab(2),l.Jc(e.categoryName),l.Ab(2),l.Jc(e.brandName),l.Ab(2),l.Jc(l.ic(11,7,e.price,"$","symbol","1.0")),l.Ab(3),l.mc("src",e.productImages[0].image,l.xc)}}const ie=[{path:"",component:(()=>{class e extends Y.a{constructor(e,t,n,i,r){super(e),this.productService=e,this.categoryService=t,this.brandService=n,this.nzImageService=i,this.router=r,this.isLoadCategory=!1,this.isLoadBrand=!1,this.filterParams=new o.a,this.productSearch=new H,this.selectedValue=null,this.onQueryParamsChange=e=>{this.baseParams.filters=[{key:"productName",value:this.searchValue}],super.onQueryParamsChangeFromParent(e)}}ngOnInit(){}searchByName(){this.baseParams.filters=[{key:"productName",value:this.searchValue}],super.search()}focusCategorySelect(){this.listCategory||(this.filterParams.pageSize=50,this.isLoadCategory=!0,this.categoryService.getAll(this.filterParams).pipe(Object(r.a)(()=>this.isLoadCategory=!1)).subscribe(e=>{"OK"==e.code&&(this.listCategory=e.data.content)}))}focusBrandSelect(){this.listBrand||(this.filterParams.pageSize=50,this.isLoadBrand=!0,this.brandService.getAll(this.filterParams).pipe(Object(r.a)(()=>this.isLoadBrand=!1)).subscribe(e=>{"OK"==e.code&&(this.listBrand=e.data.content)}))}filterByCategory(e){this.productSearch.categoryName=e,this.isLoading=!0,this.productService.getAll(this.baseParams,this.productSearch).pipe(Object(r.a)(()=>this.isLoading=!1)).subscribe(e=>{this.listData=e.data.content,this.total=e.data.totalElements})}filterByBrand(e){this.productSearch.brandName=e,this.isLoading=!0,this.productService.getAll(this.baseParams,this.productSearch).pipe(Object(r.a)(()=>this.isLoading=!1)).subscribe(e=>{this.listData=e.data.content,this.total=e.data.totalElements})}showListImage(e){let t=[];e.forEach(e=>{t.push({src:e.image})}),this.nzImageService.preview(t,{nzZoom:1,nzRotate:0})}editProduct(e){this.router.navigate(["/admin/product/detail",e.id])}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(F),l.Ob(U.a),l.Ob(P.a),l.Ob(Q.c),l.Ob(D.c))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-product-list"]],features:[l.xb],decls:42,vars:21,consts:[[1,"table-operations"],[1,"category"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a category",3,"nzDisabled","ngModel","nzLoading","ngModelChange","nzFocus"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"brand"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a brand",3,"nzDisabled","ngModel","nzAutoClearSearchValue","nzLoading","ngModelChange","nzFocus"],["nzBordered","","nzTableLayout","fixed",3,"nzFrontPagination","nzTotal","nzPageSize","nzPageIndex","nzLoading","nzData","nzQueryParams"],["sortTable",""],["nzAlign","center","nzWidth","7%","nzColumnKey","id",3,"nzSortFn"],["nzAlign","center"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],["nzAlign","center","nzWidth","20%"],[3,"ngClass",4,"ngFor","ngForOf"],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small",3,"click"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],[3,"nzLabel","nzValue"],[3,"ngClass"],["height","50",3,"src","click"],["nzAlign","center",1,"btn-action"],["nz-button","","nzType","primary","nzPopconfirmOverlayClassName","delete-confirm-card","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this size?","nzPopconfirmPlacement","left","nzDanger","",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"p"),l.Ic(3,"Category: "),l.Tb(),l.Ub(4,"nz-select",2),l.bc("ngModelChange",function(e){return t.productSearch.categoryName=e})("ngModelChange",function(e){return t.filterByCategory(e)})("nzFocus",function(){return t.focusCategorySelect()}),l.Gc(5,Z,1,2,"nz-option",3),l.Tb(),l.Tb(),l.Ub(6,"div",4),l.Ub(7,"p"),l.Ic(8,"Brand: "),l.Tb(),l.Ub(9,"nz-select",5),l.bc("ngModelChange",function(e){return t.productSearch.brandName=e})("ngModelChange",function(e){return t.filterByBrand(e)})("nzFocus",function(){return t.focusBrandSelect()}),l.Gc(10,ee,1,2,"nz-option",3),l.Tb(),l.Tb(),l.Tb(),l.Ub(11,"nz-table",6,7),l.bc("nzQueryParams",function(e){return t.onQueryParamsChange(e)}),l.Ub(13,"thead"),l.Ub(14,"tr"),l.Ub(15,"th",8),l.Ic(16,"Id"),l.Tb(),l.Ub(17,"th",9),l.Ic(18,"Product Name "),l.Ub(19,"nz-filter-trigger",10),l.bc("nzVisibleChange",function(e){return t.isShowSearchInput=e}),l.Pb(20,"i",11),l.Tb(),l.Tb(),l.Ub(21,"th",9),l.Ic(22,"Category Name"),l.Tb(),l.Ub(23,"th",9),l.Ic(24,"Brand Name"),l.Tb(),l.Ub(25,"th",9),l.Ic(26,"Price"),l.Tb(),l.Ub(27,"th",9),l.Ic(28,"Image"),l.Tb(),l.Ub(29,"th",12),l.Ic(30,"Action"),l.Tb(),l.Tb(),l.Tb(),l.Ub(31,"tbody"),l.Gc(32,ne,21,15,"tr",13),l.Tb(),l.Tb(),l.Ub(33,"nz-dropdown-menu",null,14),l.Ub(35,"div",15),l.Ub(36,"div",16),l.Ub(37,"input",17),l.bc("ngModelChange",function(e){return t.searchValue=e}),l.Tb(),l.Ub(38,"button",18),l.bc("click",function(){return t.reset()}),l.Ic(39,"Reset"),l.Tb(),l.Ub(40,"button",19),l.bc("click",function(){return t.searchByName()}),l.Ic(41," Search "),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.tc(12),n=l.tc(34);l.Ab(4),l.lc("nzDisabled",t.isLoading)("ngModel",t.productSearch.categoryName)("nzLoading",t.isLoadCategory),l.Ab(1),l.lc("ngForOf",t.listCategory),l.Ab(4),l.lc("nzDisabled",t.isLoading)("ngModel",t.productSearch.brandName)("nzAutoClearSearchValue",!1)("nzLoading",t.isLoadBrand),l.Ab(1),l.lc("ngForOf",t.listBrand),l.Ab(1),l.lc("nzFrontPagination",!1)("nzTotal",t.total)("nzPageSize",t.baseParams.pageSize)("nzPageIndex",t.baseParams.pageIndex)("nzLoading",t.isLoading)("nzData",t.listData),l.Ab(4),l.lc("nzSortFn",!0),l.Ab(4),l.lc("nzVisible",t.isShowSearchInput)("nzActive",t.searchValue.length>0)("nzDropdownMenu",n),l.Ab(13),l.lc("ngForOf",e.data),l.Ab(5),l.lc("ngModel",t.searchValue)}},directives:[p.b,a.m,a.o,g.n,h.d,h.i,h.j,h.c,h.h,h.a,h.g,h.b,S.a,I.a,h.f,W.c,z.a,a.d,m.a,f.a,p.a,g.m,X.a],pipes:[g.d],styles:[".table-operations[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}.table-operations[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%], .table-operations[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{display:flex;align-items:center}.table-operations[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .table-operations[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 15px 0 0}nz-select[_ngcontent-%COMP%]{width:230px}"]}),e})()},{path:"create",component:q},{path:"detail/:productId",component:q}];let re=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[g.c,D.f.forChild(ie),i.a,p.c,N.b]]}),e})()}}]);