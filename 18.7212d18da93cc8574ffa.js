(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{sjYV:function(e,t,n){"use strict";n.r(t),n.d(t,"ProductModule",function(){return re});var i=n("PCNd"),r=n("nYR2"),o=n("AG10"),a=n("s7LF"),c=n("AytR"),s=n("fXoL"),l=n("F0gW"),d=n("vpSu"),b=n("tYkK"),u=n("wf2+"),p=n("jTf7"),g=n("ofXK"),m=n("haRT"),h=n("px0D"),z=n("GaVp"),f=n("Jp/u"),S=n("WJhm"),T=n("66zS");function y(e,t){if(1&e&&s.Pb(0,"nz-option",12),2&e){const e=t.$implicit;s.mc("nzLabel",e.sizeName)("nzValue",e.id)}}function I(e,t){if(1&e&&s.Pb(0,"nz-option",12),2&e){const e=t.$implicit;s.mc("nzLabel",e.colorName)("nzValue",e.id)}}function C(e,t){if(1&e){const e=s.Vb();s.Ub(0,"tr"),s.Ub(1,"td",10),s.Jc(2),s.Tb(),s.Ub(3,"td",10),s.Jc(4),s.Tb(),s.Ub(5,"td",10),s.Ub(6,"input",13),s.bc("ngModelChange",function(e){return t.$implicit.quantity=e}),s.Tb(),s.Tb(),s.Ub(7,"td",10),s.Ub(8,"button",14),s.bc("click",function(){s.wc(e);const n=t.$implicit;return s.ec().deleteProductDetail(n)}),s.Pb(9,"i",15),s.Tb(),s.Tb(),s.Tb()}if(2&e){const e=t.$implicit;s.Ab(2),s.Kc(e.size),s.Ab(2),s.Kc(e.color),s.Ab(2),s.mc("ngModel",e.quantity)}}let U=(()=>{class e{constructor(e,t){this.colorService=e,this.sizeService=t,this.listProductDetail=[],this.isLoadingSizeInSelect=!0,this.isLoadingColorInSelect=!0,this.listColor=[],this.listSize=[],this.params=new o.a}ngOnInit(){this.loadColor(),this.loadSize()}loadColor(){this.params.pageSize=50,this.colorService.getAll(this.params).pipe(Object(r.a)(()=>this.isLoadingColorInSelect=!1)).subscribe(e=>{"OK"==e.code&&(this.listColor=e.data.content)})}loadSize(){this.params.pageSize=50,this.sizeService.getAll(this.params).pipe(Object(r.a)(()=>this.isLoadingSizeInSelect=!1)).subscribe(e=>{"OK"==e.code&&(this.listSize=e.data.content)})}generateProductDetail(){this.listProductDetail=[],this.listColor.filter(e=>this.colorIdsSelected.includes(e.id)).forEach(e=>{this.listSize.filter(e=>this.sizeIdsSelected.includes(e.id)).forEach(t=>{this.listProductDetail.push({id:null,quantity:0,colorId:e.id,color:e.colorName,sizeId:t.id,size:t.sizeName})})})}getProductDetails(){return this.listProductDetail}deleteProductDetail(e){this.listProductDetail=this.listProductDetail.filter(t=>t.colorId!==e.colorId||t.sizeId!==e.sizeId),0===this.listProductDetail.length&&(this.colorIdsSelected=[],this.sizeIdsSelected=[])}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(l.a),s.Ob(d.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-product-option"]],inputs:{listProductDetail:"listProductDetail",sizeIdsSelected:"sizeIdsSelected",colorIdsSelected:"colorIdsSelected"},decls:31,vars:15,consts:[[1,"option-value","section"],[1,"content"],[1,"column"],[3,"nzSpan"],["nzErrorTip","Please input your size!",3,"nzSpan"],["nzMode","multiple","nzAllowClear","","nzShowSearch","","nzPlaceHolder","Select a size",3,"nzLoading","nzMaxTagCount","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzErrorTip","Please input your color!",3,"nzSpan"],["nzMode","multiple","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a color",3,"nzLoading","nzMaxTagCount","ngModel","ngModelChange"],["nzBordered","",3,"nzShowPagination","nzData"],["nzAlign","center"],[4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["type","number","nz-input","","placeholder","Quantity",3,"ngModel","ngModelChange"],["nz-button","","nzDanger","","nzType","primary",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"h4"),s.Jc(2,"Option Value:"),s.Tb(),s.Ub(3,"div",1),s.Ub(4,"div",2),s.Ub(5,"nz-form-item"),s.Ub(6,"nz-form-label",3),s.Jc(7,"Size"),s.Tb(),s.Ub(8,"nz-form-control",4),s.Ub(9,"nz-select",5),s.bc("ngModelChange",function(e){return t.sizeIdsSelected=e})("ngModelChange",function(){return t.generateProductDetail()}),s.Hc(10,y,1,2,"nz-option",6),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(11,"div",2),s.Ub(12,"nz-form-item"),s.Ub(13,"nz-form-label",3),s.Jc(14,"Color"),s.Tb(),s.Ub(15,"nz-form-control",7),s.Ub(16,"nz-select",8),s.bc("ngModelChange",function(e){return t.colorIdsSelected=e})("ngModelChange",function(){return t.generateProductDetail()}),s.Hc(17,I,1,2,"nz-option",6),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(18,"nz-table",9),s.Ub(19,"thead"),s.Ub(20,"tr"),s.Ub(21,"th",10),s.Jc(22,"Size"),s.Tb(),s.Ub(23,"th",10),s.Jc(24,"Color"),s.Tb(),s.Ub(25,"th",10),s.Jc(26,"Quantity"),s.Tb(),s.Ub(27,"th",10),s.Jc(28,"Action"),s.Tb(),s.Tb(),s.Tb(),s.Ub(29,"tbody"),s.Hc(30,C,10,3,"tr",11),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Ab(6),s.mc("nzSpan",6),s.Ab(2),s.mc("nzSpan",14),s.Ab(1),s.mc("nzLoading",t.isLoadingSizeInSelect)("nzMaxTagCount",3)("ngModel",t.sizeIdsSelected),s.Ab(1),s.mc("ngForOf",t.listSize),s.Ab(3),s.mc("nzSpan",6),s.Ab(2),s.mc("nzSpan",14),s.Ab(1),s.mc("nzLoading",t.isLoadingColorInSelect)("nzMaxTagCount",3)("ngModel",t.colorIdsSelected),s.Ab(1),s.mc("ngForOf",t.listColor),s.Ab(1),s.mc("nzShowPagination",!1)("nzData",t.listProductDetail),s.Ab(12),s.mc("ngForOf",t.listProductDetail))},directives:[b.c,u.c,b.a,u.d,u.a,p.b,a.m,a.o,g.n,m.d,m.i,m.j,m.c,m.h,m.a,m.f,p.a,a.p,h.a,a.d,z.a,f.a,S.a,T.a],styles:[".option-value.section[_ngcontent-%COMP%]{border:none}"]}),e})();var v=n("2AjE"),P=n("WRNG"),O=n("IheW"),A=n("JIr8"),w=n("lJxs"),L=n("LRne");let F=(()=>{class e{constructor(e){this.httpClient=e}getById(e){return this.httpClient.get(`${c.a.productServiceUrl}/api/product/${e}`).pipe(Object(A.a)(e=>Object(L.a)(e.error)))}create(e){return this.httpClient.post(c.a.productServiceUrl+"/api/product/create",e).pipe(Object(A.a)(e=>Object(L.a)(e.error)))}update(e){return this.httpClient.put(c.a.productServiceUrl+"/api/product",e).pipe(Object(A.a)(e=>Object(L.a)(e.error)))}delete(e,t){let n=(new O.g).append("page",""+(t.pageIndex-1)).append("pageSize",""+t.pageSize);return null!=t.sortField&&(n=n.append("sortField",""+t.sortField).append("sortOrder",""+t.sortOrder)),t.filters.length>0&&t.filters.forEach(e=>{n=n.append(e.key,e.value)}),this.httpClient.delete(`${c.a.productServiceUrl}/api/product/${e}`,{params:n}).pipe(Object(A.a)(e=>Object(L.a)(e.error)))}getAll(e,t){let n=(new O.g).append("page",""+(e.pageIndex-1)).append("pageSize",""+e.pageSize);return null!=e.sortField&&(n=n.append("sortField",""+e.sortField).append("sortOrder",""+e.sortOrder)),e.filters.length>0&&e.filters.forEach(e=>{n=n.append(e.key,e.value)}),this.httpClient.post(c.a.productServiceUrl+"/api/product",null!=t?t:{},{params:n}).pipe(Object(w.a)(e=>(e.data.content.forEach(e=>{0==e.productImages.length&&e.productImages.push({image:"https://drive.google.com/thumbnail?id=1KXVcuCEi-aYgrJXkUwV_RODDh5cT5qHv"})}),e)),Object(A.a)(e=>Object(L.a)(e.error)))}deleteImage(e){return this.httpClient.delete(`${c.a.productServiceUrl}/api/product/image/${e}`).pipe(Object(A.a)(e=>Object(L.a)(e.error)))}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(O.c))},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=n("JXeA"),D=n("iInd"),J=n("gaRz"),N=n("mrSG"),V=n("NFMk");const B=function(){return{width:"100%"}};function E(e,t){if(1&e&&s.Pb(0,"img",7),2&e){const e=s.ec();s.mc("src",e.previewImage,s.yc)("ngStyle",s.oc(2,B))}}let j=(()=>{class e{constructor(e){this.productService=e,this.backEndUrl=c.a.productServiceUrl+"/api/upload",this.listImageChange=new s.n,this.previewImage="",this.previewVisible=!1,this.handlePreview=e=>Object(N.a)(this,void 0,void 0,function*(){e.url||e.preview||(e.preview=yield function(e){return new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)})}(e.originFileObj)),this.previewImage=e.url||e.preview,this.previewVisible=!0}),this.handleChange=e=>{this.listImageChange.emit(this.listImage)},this.removeFile=e=>(this.productService.deleteImage(e.id).subscribe(e=>{}),!0)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(F))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-product-image"]],inputs:{listImage:"listImage"},outputs:{listImageChange:"listImageChange"},decls:13,vars:9,consts:[[1,"product-image","section"],[1,"clearfix"],["nzName","files","nzListType","picture-card",3,"nzAction","nzMultiple","nzFileList","nzRemove","nzShowButton","nzPreview","nzFileListChange","nzChange"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzVisible","nzContent","nzFooter","nzOnCancel"],["modalContent",""],[3,"src","ngStyle"]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Ub(1,"h4"),s.Jc(2,"Product Images:"),s.Tb(),s.Ub(3,"nz-form-item"),s.Ub(4,"div",1),s.Ub(5,"nz-upload",2),s.bc("nzFileListChange",function(e){return t.listImage=e})("nzChange",function(e){return t.handleChange(e)}),s.Ub(6,"div"),s.Pb(7,"i",3),s.Ub(8,"div",4),s.Jc(9,"Upload"),s.Tb(),s.Tb(),s.Tb(),s.Ub(10,"nz-modal",5),s.bc("nzOnCancel",function(){return t.previewVisible=!1}),s.Hc(11,E,1,3,"ng-template",null,6,s.Ic),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){const e=s.uc(12);s.Ab(5),s.mc("nzAction",t.backEndUrl)("nzMultiple",!0)("nzFileList",t.listImage)("nzRemove",t.removeFile)("nzShowButton",t.listImage.length<8)("nzPreview",t.handlePreview),s.Ab(5),s.mc("nzVisible",t.previewVisible)("nzContent",e)("nzFooter",null)}},directives:[b.c,u.c,J.a,S.a,T.a,V.a,g.p],styles:[""]}),e})();var x=n("fb/r");function k(e,t){if(1&e&&s.Pb(0,"nz-option",31),2&e){const e=t.$implicit;s.mc("nzLabel",e.categoryName)("nzValue",e.id)}}function K(e,t){1&e&&(s.Sb(0),s.Jc(1," Please input your price! "),s.Rb())}function $(e,t){1&e&&(s.Sb(0),s.Jc(1," The min value is 0 "),s.Rb())}function H(e,t){if(1&e&&(s.Hc(0,K,2,0,"ng-container",32),s.Hc(1,$,2,0,"ng-container",32)),2&e){const e=t.$implicit;s.mc("ngIf",e.hasError("required")),s.Ab(1),s.mc("ngIf",e.hasError("min"))}}function R(e,t){if(1&e&&s.Pb(0,"nz-option",31),2&e){const e=t.$implicit;s.mc("nzLabel",e.brandName)("nzValue",e.id)}}const _=function(e){return{isLoading:e}};let q=(()=>{class e{constructor(e,t,n,i,r,a){this.formBuilder=e,this.categoryService=t,this.brandService=n,this.productService=i,this.messageService=r,this.activatedRoute=a,this.backEndUrl=c.a.productServiceUrl+"/api/product/import",this.isLoadingCategoryInSelect=!0,this.isLoadingBrandInSelect=!0,this.isLoadingProductEdit=!1,this.isLoadingButtonSubmit=!1,this.params=new o.a,this.listImage=[],this.listProductDetail=[],this.sizeIdsSelected=[],this.colorIdsSelected=[]}ngOnInit(){this.buildForm(),this.loadCategory(),this.loadBrand(),this.activatedRoute.params.subscribe(e=>{e.productId&&(this.productId=e.productId,this.loadProductEdit(this.productId))})}loadProductEdit(e){this.isLoadingProductEdit=!0,this.productService.getById(e).pipe(Object(r.a)(()=>this.isLoadingProductEdit=!1)).subscribe(e=>{if("OK"==e.code){const t=e.data;this.productForm.controls.productName.setValue(t.productName),this.productForm.controls.price.setValue(t.price),this.productForm.controls.categoryId.setValue(t.categoryId),this.productForm.controls.brandId.setValue(t.brandId),this.productForm.controls.description.setValue(t.description),this.listImage=t.productImages.map((e,t)=>({uid:t,id:e.id,url:e.image,name:"image.png"})),console.log(t.productDetails),this.listProductDetail=[...t.productDetails],this.loadColorSizeSelected(t.productDetails)}})}loadColorSizeSelected(e){const t=new Set,n=new Set;e.forEach(e=>{t.add(e.sizeId),n.add(e.colorId)}),this.colorIdsSelected=[...n],this.sizeIdsSelected=[...t]}buildForm(){this.productForm=this.formBuilder.group({productName:[null,a.r.required],price:[null,[a.r.required,a.r.min(0)]],brandId:[null,a.r.required],categoryId:[null,a.r.required],description:[null]})}loadCategory(){this.params.pageSize=50,this.categoryService.getAll(this.params).pipe(Object(r.a)(()=>this.isLoadingCategoryInSelect=!1)).subscribe(e=>{"OK"==e.code&&(this.listCategory=e.data.content)})}loadBrand(){this.params.pageSize=50,this.brandService.getAll(this.params).pipe(Object(r.a)(()=>this.isLoadingBrandInSelect=!1)).subscribe(e=>{"OK"==e.code&&(this.listBrand=e.data.content)})}submitForm(){let e={id:null,categoryName:null,brandName:null,description:this.productForm.get("description").value,productName:this.productForm.get("productName").value,price:this.productForm.get("price").value,categoryId:this.productForm.get("categoryId").value,brandId:this.productForm.get("brandId").value,productDetails:this.productOption.getProductDetails(),productImages:[],images:[]};this.listImage.forEach(t=>{"done"===t.status&&e.images.push(null==this.productId||void 0===t.url?t.response.data[0]:t.url)}),this.isLoadingButtonSubmit=!0,null!=this.productId?(e.id=this.productId,this.productService.update(e).pipe(Object(r.a)(()=>this.isLoadingButtonSubmit=!1)).subscribe(e=>{"OK"==e.code&&this.messageService.create("success","Update product successfully!")})):this.productService.create(e).pipe(Object(r.a)(()=>this.isLoadingButtonSubmit=!1)).subscribe(e=>{"OK"==e.code&&(this.messageService.create("success","Create product successfully!"),this.productForm.reset(),this.listProductDetail=[],this.listImage=[])})}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(a.e),s.Ob(v.a),s.Ob(P.a),s.Ob(F),s.Ob(M.b),s.Ob(D.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-product-detail"]],viewQuery:function(e,t){if(1&e&&s.Mc(U,!0),2&e){let e;s.tc(e=s.cc())&&(t.productOption=e.first)}},decls:54,vars:30,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["target","_blank","href","https://drive.google.com/file/d/1yPRKV0JVhKOEe1YeYt4bSjY7GChizRtX/view?usp=sharing"],[3,"nzAction"],["nz-button",""],["nz-icon","","nzType","upload"],["nz-form","",3,"formGroup"],[1,"base-info","section"],[1,"content"],[1,"column"],["nzFor","productName",3,"nzSpan"],["nzErrorTip","Please input your product name!",3,"nzSpan"],["nz-input","","type","text","formControlName","productName"],["nzErrorTip","Please input your category name!",3,"nzSpan"],["formControlName","categoryId","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a category",3,"nzLoading"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzFor","price",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nz-input","","type","number","formControlName","price"],["priceErrorTpl",""],["nzErrorTip","Please input your price!",3,"nzSpan"],["formControlName","brandId","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a brand",3,"nzLoading"],["nzFor","description",3,"nzSpan"],["nzErrorTip","Please input your description!",3,"nzSpan"],["rows","4","nz-input","","formControlName","description"],[3,"listImage","listImageChange"],[3,"listProductDetail","colorIdsSelected","sizeIdsSelected"],[1,"btn-submit"],["nz-button","","nzType","primary",3,"nzLoading","disabled","click"],["nzSimple","",3,"ngClass","nzSpinning"],[3,"nzLabel","nzValue"],[4,"ngIf"]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"div",2),s.Ub(3,"p"),s.Jc(4,"You can create product with import excel: "),s.Ub(5,"a",3),s.Jc(6,"Template"),s.Tb(),s.Tb(),s.Tb(),s.Ub(7,"div",2),s.Ub(8,"nz-upload",4),s.Ub(9,"button",5),s.Pb(10,"i",6),s.Jc(11,"Upload"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"form",7),s.Ub(13,"div",8),s.Ub(14,"h4"),s.Jc(15,"Basic Information:"),s.Tb(),s.Ub(16,"div",9),s.Ub(17,"div",10),s.Ub(18,"nz-form-item"),s.Ub(19,"nz-form-label",11),s.Jc(20,"Product Name"),s.Tb(),s.Ub(21,"nz-form-control",12),s.Pb(22,"input",13),s.Tb(),s.Tb(),s.Ub(23,"nz-form-item"),s.Ub(24,"nz-form-label",11),s.Jc(25,"Category"),s.Tb(),s.Ub(26,"nz-form-control",14),s.Ub(27,"nz-select",15),s.Hc(28,k,1,2,"nz-option",16),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(29,"div",10),s.Ub(30,"nz-form-item"),s.Ub(31,"nz-form-label",17),s.Jc(32,"Price"),s.Tb(),s.Ub(33,"nz-form-control",18),s.Pb(34,"input",19),s.Hc(35,H,2,2,"ng-template",null,20,s.Ic),s.Tb(),s.Tb(),s.Ub(37,"nz-form-item"),s.Ub(38,"nz-form-label",17),s.Jc(39,"Brand"),s.Tb(),s.Ub(40,"nz-form-control",21),s.Ub(41,"nz-select",22),s.Hc(42,R,1,2,"nz-option",16),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(43,"nz-form-item"),s.Ub(44,"nz-form-label",23),s.Jc(45,"Description"),s.Tb(),s.Ub(46,"nz-form-control",24),s.Pb(47,"textarea",25),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(48,"app-product-image",26),s.bc("listImageChange",function(e){return t.listImage=e}),s.Tb(),s.Pb(49,"app-product-option",27),s.Ub(50,"div",28),s.Ub(51,"button",29),s.bc("click",function(){return t.submitForm()}),s.Jc(52,"Save change"),s.Tb(),s.Tb(),s.Pb(53,"nz-spin",30),s.Tb()),2&e){const e=s.uc(36);s.Ab(1),s.mc("nzGutter",24),s.Ab(1),s.mc("nzSpan",18),s.Ab(5),s.mc("nzSpan",6),s.Ab(1),s.nc("nzAction",t.backEndUrl),s.Ab(4),s.mc("formGroup",t.productForm),s.Ab(7),s.mc("nzSpan",6),s.Ab(2),s.mc("nzSpan",14),s.Ab(3),s.mc("nzSpan",6),s.Ab(2),s.mc("nzSpan",14),s.Ab(1),s.mc("nzLoading",t.isLoadingCategoryInSelect),s.Ab(1),s.mc("ngForOf",t.listCategory),s.Ab(3),s.mc("nzSpan",6),s.Ab(2),s.mc("nzSpan",14)("nzErrorTip",e),s.Ab(5),s.mc("nzSpan",6),s.Ab(2),s.mc("nzSpan",14),s.Ab(1),s.mc("nzLoading",t.isLoadingBrandInSelect),s.Ab(1),s.mc("ngForOf",t.listBrand),s.Ab(2),s.mc("nzSpan",3),s.Ab(2),s.mc("nzSpan",19),s.Ab(2),s.mc("listImage",t.listImage),s.Ab(1),s.mc("listProductDetail",t.listProductDetail)("colorIdsSelected",t.colorIdsSelected)("sizeIdsSelected",t.sizeIdsSelected),s.Ab(2),s.mc("nzLoading",t.isLoadingButtonSubmit)("disabled",t.productForm.invalid),s.Ab(2),s.mc("ngClass",s.pc(28,_,t.isLoadingProductEdit))("nzSpinning",t.isLoadingProductEdit)}},directives:[b.c,b.a,J.a,z.a,f.a,S.a,T.a,a.s,a.n,u.b,a.h,u.c,u.d,u.a,h.a,a.d,a.m,a.g,p.b,g.n,a.p,j,U,x.a,g.m,p.a,g.o],styles:[".container[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;height:100%}.btn-submit[_ngcontent-%COMP%]{float:right;margin:20px 0 20px 20px}"]}),e})();class G{constructor(){this.productName=null,this.price=null,this.categoryName=null,this.brandName=null}}var Y=n("q5vz"),Q=n("C/7j"),W=n("phDe"),X=n("SHEi");function Z(e,t){if(1&e&&s.Pb(0,"nz-option",20),2&e){const e=t.$implicit;s.mc("nzLabel",e.categoryName)("nzValue",e.categoryName)}}function ee(e,t){if(1&e&&s.Pb(0,"nz-option",20),2&e){const e=t.$implicit;s.mc("nzLabel",e.brandName)("nzValue",e.brandName)}}const te=function(e,t){return{odd:e,even:t}};function ne(e,t){if(1&e){const e=s.Vb();s.Ub(0,"tr",21),s.Ub(1,"td",9),s.Jc(2),s.Tb(),s.Ub(3,"td",9),s.Jc(4),s.Tb(),s.Ub(5,"td",9),s.Jc(6),s.Tb(),s.Ub(7,"td",9),s.Jc(8),s.Tb(),s.Ub(9,"td",9),s.Jc(10),s.fc(11,"currency"),s.Tb(),s.Ub(12,"td",9),s.Ub(13,"img",22),s.bc("click",function(){s.wc(e);const n=t.$implicit;return s.ec().showListImage(n.productImages)}),s.Tb(),s.Tb(),s.Ub(14,"td",23),s.Ub(15,"button",24),s.bc("nzOnConfirm",function(){s.wc(e);const n=t.$implicit;return s.ec().delete(n.id)}),s.Jc(16,"Delete"),s.Pb(17,"i",25),s.Tb(),s.Ub(18,"button",26),s.bc("click",function(){s.wc(e);const n=t.$implicit;return s.ec().editProduct(n)}),s.Jc(19,"Edit"),s.Pb(20,"i",27),s.Tb(),s.Tb(),s.Tb()}if(2&e){const e=t.$implicit;s.mc("ngClass",s.qc(12,te,t.odd,t.even)),s.Ab(2),s.Kc(e.id),s.Ab(2),s.Kc(e.productName),s.Ab(2),s.Kc(e.categoryName),s.Ab(2),s.Kc(e.brandName),s.Ab(2),s.Kc(s.jc(11,7,e.price,"$","symbol","1.0")),s.Ab(3),s.nc("src",e.productImages[0].image,s.yc)}}const ie=[{path:"",component:(()=>{class e extends Y.a{constructor(e,t,n,i,r){super(e),this.productService=e,this.categoryService=t,this.brandService=n,this.nzImageService=i,this.router=r,this.isLoadCategory=!1,this.isLoadBrand=!1,this.filterParams=new o.a,this.productSearch=new G,this.selectedValue=null,this.onQueryParamsChange=e=>{this.baseParams.filters=[{key:"productName",value:this.searchValue}],super.onQueryParamsChangeFromParent(e)}}ngOnInit(){}searchByName(){this.baseParams.filters=[{key:"productName",value:this.searchValue}],super.search()}focusCategorySelect(){this.listCategory||(this.filterParams.pageSize=50,this.isLoadCategory=!0,this.categoryService.getAll(this.filterParams).pipe(Object(r.a)(()=>this.isLoadCategory=!1)).subscribe(e=>{"OK"==e.code&&(this.listCategory=e.data.content)}))}focusBrandSelect(){this.listBrand||(this.filterParams.pageSize=50,this.isLoadBrand=!0,this.brandService.getAll(this.filterParams).pipe(Object(r.a)(()=>this.isLoadBrand=!1)).subscribe(e=>{"OK"==e.code&&(this.listBrand=e.data.content)}))}filterByCategory(e){this.productSearch.categoryName=e,this.isLoading=!0,this.productService.getAll(this.baseParams,this.productSearch).pipe(Object(r.a)(()=>this.isLoading=!1)).subscribe(e=>{this.listData=e.data.content,this.total=e.data.totalElements})}filterByBrand(e){this.productSearch.brandName=e,this.isLoading=!0,this.productService.getAll(this.baseParams,this.productSearch).pipe(Object(r.a)(()=>this.isLoading=!1)).subscribe(e=>{this.listData=e.data.content,this.total=e.data.totalElements})}showListImage(e){let t=[];e.forEach(e=>{t.push({src:e.image})}),this.nzImageService.preview(t,{nzZoom:1,nzRotate:0})}editProduct(e){this.router.navigate(["/admin/product/detail",e.id])}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(F),s.Ob(v.a),s.Ob(P.a),s.Ob(Q.c),s.Ob(D.c))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-product-list"]],features:[s.xb],decls:42,vars:21,consts:[[1,"table-operations"],[1,"category"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a category",3,"nzDisabled","ngModel","nzLoading","ngModelChange","nzFocus"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"brand"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a brand",3,"nzDisabled","ngModel","nzAutoClearSearchValue","nzLoading","ngModelChange","nzFocus"],["nzBordered","","nzTableLayout","fixed",3,"nzFrontPagination","nzTotal","nzPageSize","nzPageIndex","nzLoading","nzData","nzQueryParams"],["sortTable",""],["nzAlign","center","nzWidth","7%","nzColumnKey","id",3,"nzSortFn"],["nzAlign","center"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],["nzAlign","center","nzWidth","20%"],[3,"ngClass",4,"ngFor","ngForOf"],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small",3,"click"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],[3,"nzLabel","nzValue"],[3,"ngClass"],["height","50",3,"src","click"],["nzAlign","center",1,"btn-action"],["nz-button","","nzType","primary","nzPopconfirmOverlayClassName","delete-confirm-card","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this size?","nzPopconfirmPlacement","left","nzDanger","",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"p"),s.Jc(3,"Category: "),s.Tb(),s.Ub(4,"nz-select",2),s.bc("ngModelChange",function(e){return t.productSearch.categoryName=e})("ngModelChange",function(e){return t.filterByCategory(e)})("nzFocus",function(){return t.focusCategorySelect()}),s.Hc(5,Z,1,2,"nz-option",3),s.Tb(),s.Tb(),s.Ub(6,"div",4),s.Ub(7,"p"),s.Jc(8,"Brand: "),s.Tb(),s.Ub(9,"nz-select",5),s.bc("ngModelChange",function(e){return t.productSearch.brandName=e})("ngModelChange",function(e){return t.filterByBrand(e)})("nzFocus",function(){return t.focusBrandSelect()}),s.Hc(10,ee,1,2,"nz-option",3),s.Tb(),s.Tb(),s.Tb(),s.Ub(11,"nz-table",6,7),s.bc("nzQueryParams",function(e){return t.onQueryParamsChange(e)}),s.Ub(13,"thead"),s.Ub(14,"tr"),s.Ub(15,"th",8),s.Jc(16,"Id"),s.Tb(),s.Ub(17,"th",9),s.Jc(18,"Product Name "),s.Ub(19,"nz-filter-trigger",10),s.bc("nzVisibleChange",function(e){return t.isShowSearchInput=e}),s.Pb(20,"i",11),s.Tb(),s.Tb(),s.Ub(21,"th",9),s.Jc(22,"Category Name"),s.Tb(),s.Ub(23,"th",9),s.Jc(24,"Brand Name"),s.Tb(),s.Ub(25,"th",9),s.Jc(26,"Price"),s.Tb(),s.Ub(27,"th",9),s.Jc(28,"Image"),s.Tb(),s.Ub(29,"th",12),s.Jc(30,"Action"),s.Tb(),s.Tb(),s.Tb(),s.Ub(31,"tbody"),s.Hc(32,ne,21,15,"tr",13),s.Tb(),s.Tb(),s.Ub(33,"nz-dropdown-menu",null,14),s.Ub(35,"div",15),s.Ub(36,"div",16),s.Ub(37,"input",17),s.bc("ngModelChange",function(e){return t.searchValue=e}),s.Tb(),s.Ub(38,"button",18),s.bc("click",function(){return t.reset()}),s.Jc(39,"Reset"),s.Tb(),s.Ub(40,"button",19),s.bc("click",function(){return t.searchByName()}),s.Jc(41," Search "),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){const e=s.uc(12),n=s.uc(34);s.Ab(4),s.mc("nzDisabled",t.isLoading)("ngModel",t.productSearch.categoryName)("nzLoading",t.isLoadCategory),s.Ab(1),s.mc("ngForOf",t.listCategory),s.Ab(4),s.mc("nzDisabled",t.isLoading)("ngModel",t.productSearch.brandName)("nzAutoClearSearchValue",!1)("nzLoading",t.isLoadBrand),s.Ab(1),s.mc("ngForOf",t.listBrand),s.Ab(1),s.mc("nzFrontPagination",!1)("nzTotal",t.total)("nzPageSize",t.baseParams.pageSize)("nzPageIndex",t.baseParams.pageIndex)("nzLoading",t.isLoading)("nzData",t.listData),s.Ab(4),s.mc("nzSortFn",!0),s.Ab(4),s.mc("nzVisible",t.isShowSearchInput)("nzActive",t.searchValue.length>0)("nzDropdownMenu",n),s.Ab(13),s.mc("ngForOf",e.data),s.Ab(5),s.mc("ngModel",t.searchValue)}},directives:[p.b,a.m,a.o,g.n,m.d,m.i,m.j,m.c,m.h,m.a,m.g,m.b,S.a,T.a,m.f,W.c,h.a,a.d,z.a,f.a,p.a,g.m,X.a],pipes:[g.d],styles:[".table-operations[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}.table-operations[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%], .table-operations[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{display:flex;align-items:center}.table-operations[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .table-operations[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 15px 0 0}nz-select[_ngcontent-%COMP%]{width:230px}"]}),e})()},{path:"create",component:q},{path:"detail/:productId",component:q}];let re=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[g.c,D.f.forChild(ie),i.a,p.c,J.b]]}),e})()}}]);