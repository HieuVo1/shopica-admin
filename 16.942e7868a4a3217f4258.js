(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{yzJG:function(e,t,n){"use strict";n.r(t),n.d(t,"OrderModule",function(){return j});var r=n("PCNd"),c=n("eIep"),o=n("fXoL"),i=n("JXeA"),a=n("iInd"),s=n("IheW"),b=n("AytR"),d=n("JIr8"),p=n("LRne");let l=(()=>{class e{constructor(e){this.httpClient=e}getById(e){return this.httpClient.get(`${b.a.productServiceUrl}/api/orders/getById/${e}`).pipe(Object(d.a)(e=>Object(p.a)(e.error)))}create(e){return this.httpClient.post(b.a.productServiceUrl+"/api/product/create",e).pipe(Object(d.a)(e=>Object(p.a)(e.error)))}update(e){return console.log(e),this.httpClient.put(b.a.productServiceUrl+"/api/product",e).pipe(Object(d.a)(e=>Object(p.a)(e.error)))}delete(e,t){let n=(new s.g).append("page",""+(t.pageIndex-1)).append("pageSize",""+t.pageSize);return null!=t.sortField&&(n=n.append("sortField",""+t.sortField).append("sortOrder",""+t.sortOrder)),t.filters.length>0&&t.filters.forEach(e=>{n=n.append(e.key,e.value)}),this.httpClient.delete(`${b.a.productServiceUrl}/api/product/${e}`,{params:n}).pipe(Object(d.a)(e=>Object(p.a)(e.error)))}getAll(e){let t=(new s.g).append("pageIndex",""+e.pageIndex).append("pageSize",""+e.pageSize);return null!=e.sortField&&(t=t.append("sortField",""+e.sortField).append("sortOrder",""+e.sortOrder)),e.filters.length>0&&e.filters.forEach(e=>{t=t.append(e.key,e.value)}),this.httpClient.get(b.a.orderServiceUrl+"/api/orders/getAll",{params:t}).pipe(Object(d.a)(e=>Object(p.a)(e.error)))}getOrderDetails(e){return this.httpClient.get(`${b.a.orderServiceUrl}/api/orders/getOrderDetails/${e}`).pipe(Object(d.a)(e=>Object(p.a)(e.error)))}updateState(e,t){return this.httpClient.get(`${b.a.orderServiceUrl}/api/orders/updateState/${e}?state=${t}`).pipe(Object(d.a)(e=>Object(p.a)(e.error)))}}return e.\u0275fac=function(t){return new(t||e)(o.Yb(s.c))},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=n("ofXK"),g=n("tYkK"),h=n("fb/r"),f=n("haRT");const T=function(e,t){return{odd:e,even:t}};function m(e,t){if(1&e&&(o.Ub(0,"tr",16),o.Ub(1,"td",12),o.Jc(2),o.Tb(),o.Ub(3,"td",12),o.Jc(4),o.Tb(),o.Ub(5,"td",12),o.Jc(6),o.gc(7,"currency"),o.Tb(),o.Ub(8,"td",12),o.Jc(9),o.Tb(),o.Ub(10,"td",12),o.Jc(11),o.gc(12,"currency"),o.Tb(),o.Tb()),2&e){const e=t.$implicit;o.mc("ngClass",o.qc(10,T,t.odd,t.even)),o.Ab(2),o.Kc(e.id),o.Ab(2),o.Kc(e.productName),o.Ab(2),o.Kc(o.hc(7,6,e.price)),o.Ab(3),o.Lc("",e.quantity," "),o.Ab(2),o.Kc(o.hc(12,8,e.totalPriceProduct))}}function z(e,t){if(1&e&&(o.Ub(0,"div",6),o.Ub(1,"div",7),o.Ub(2,"div",8),o.Ub(3,"p"),o.Jc(4),o.Tb(),o.Tb(),o.Tb(),o.Ub(5,"nz-table",9,10),o.Ub(7,"thead"),o.Ub(8,"tr"),o.Ub(9,"th",11),o.Jc(10,"Id"),o.Tb(),o.Ub(11,"th",12),o.Jc(12,"Product"),o.Tb(),o.Ub(13,"th",12),o.Jc(14,"Price"),o.Tb(),o.Ub(15,"th",12),o.Jc(16,"Quantity"),o.Tb(),o.Ub(17,"th",12),o.Jc(18,"Total"),o.Tb(),o.Tb(),o.Tb(),o.Ub(19,"tbody"),o.Hc(20,m,13,13,"tr",13),o.Tb(),o.Tb(),o.Ub(21,"div",14),o.Ub(22,"div",8),o.Ub(23,"p"),o.Jc(24,"Notes"),o.Tb(),o.Tb(),o.Ub(25,"div",15),o.Jc(26),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.uc(6),t=o.fc(2);o.Ab(4),o.Lc("Order Items - #",t.order.id,""),o.Ab(1),o.mc("nzFrontPagination",!1)("nzData",t.orderDetails),o.Ab(15),o.mc("ngForOf",e.data),o.Ab(6),o.Lc(" ",t.order.notes," ")}}function U(e,t){if(1&e){const e=o.Vb();o.Ub(0,"span",25),o.bc("click",function(){o.wc(e);const t=o.fc(4);return t.updateState(t.order.id,"DELIVER")}),o.Jc(1,"DELIVER"),o.Tb()}}function C(e,t){if(1&e){const e=o.Vb();o.Ub(0,"span",26),o.bc("click",function(){o.wc(e);const t=o.fc(4);return t.updateState(t.order.id,"COMPLETE")}),o.Jc(1,"COMPLETE"),o.Tb()}}function O(e,t){if(1&e){const e=o.Vb();o.Ub(0,"div",21),o.Ub(1,"b"),o.Jc(2,"Update State: "),o.Tb(),o.Hc(3,U,2,0,"span",22),o.Hc(4,C,2,0,"span",23),o.Jc(5," | "),o.Ub(6,"span",24),o.bc("click",function(){o.wc(e);const t=o.fc(3);return t.updateState(t.order.id,"CANCEL")}),o.Jc(7,"CANCEL"),o.Tb(),o.Tb()}if(2&e){const e=o.fc(3);o.Ab(3),o.mc("ngIf","PENDING"==e.order.state),o.Ab(1),o.mc("ngIf","DELIVER"==e.order.state)}}const v=function(e,t,n,r){return{complete:e,cancel:t,deliver:n,pending:r}};function P(e,t){if(1&e&&(o.Ub(0,"div",17),o.Ub(1,"div",18),o.Ub(2,"div",8),o.Ub(3,"p"),o.Jc(4,"Order Details"),o.Tb(),o.Tb(),o.Ub(5,"div",15),o.Ub(6,"p"),o.Ub(7,"b"),o.Jc(8,"State: "),o.Tb(),o.Ub(9,"span",16),o.Jc(10),o.Tb(),o.Tb(),o.Hc(11,O,8,2,"div",19),o.Ub(12,"p"),o.Ub(13,"b"),o.Jc(14,"Time : "),o.Tb(),o.Jc(15),o.gc(16,"date"),o.Tb(),o.Ub(17,"p"),o.Ub(18,"b"),o.Jc(19,"Total : "),o.Tb(),o.Jc(20),o.gc(21,"currency"),o.Tb(),o.Ub(22,"p"),o.Ub(23,"b"),o.Jc(24,"Discount : "),o.Tb(),o.Jc(25),o.gc(26,"currency"),o.Tb(),o.Ub(27,"p"),o.Ub(28,"b"),o.Jc(29,"Shipping Cost : "),o.Tb(),o.Jc(30),o.gc(31,"currency"),o.Tb(),o.Tb(),o.Tb(),o.Ub(32,"div",20),o.Ub(33,"div",8),o.Ub(34,"p"),o.Jc(35,"Customer Information"),o.Tb(),o.Tb(),o.Ub(36,"div",15),o.Ub(37,"p"),o.Ub(38,"b"),o.Jc(39,"Customer : "),o.Tb(),o.Jc(40),o.Tb(),o.Ub(41,"p"),o.Ub(42,"b"),o.Jc(43,"Address : "),o.Tb(),o.Jc(44),o.Tb(),o.Ub(45,"p"),o.Ub(46,"b"),o.Jc(47,"Phone : "),o.Tb(),o.Jc(48),o.Tb(),o.Ub(49,"p"),o.Ub(50,"b"),o.Jc(51,"Email : "),o.Tb(),o.Jc(52),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.fc(2);o.Ab(9),o.mc("ngClass",o.sc(20,v,"COMPLETE"==e.order.state,"CANCEL"==e.order.state,"DELIVER"==e.order.state,"PENDING"==e.order.state)),o.Ab(1),o.Kc(e.order.state),o.Ab(1),o.mc("ngIf","COMPLETE"!=e.order.state&&"CANCEL"!=e.order.state),o.Ab(4),o.Lc(" ",o.ic(16,11,e.order.created_at,"medium")," "),o.Ab(5),o.Lc(" ",o.hc(21,14,e.order.total)," "),o.Ab(5),o.Lc(" ",o.hc(26,16,e.order.discount)," "),o.Ab(5),o.Lc(" ",o.hc(31,18,e.order.shippingCost)," "),o.Ab(10),o.Lc(" ",e.order.customerName," "),o.Ab(4),o.Lc(" ",e.order.address.addressName," "),o.Ab(4),o.Lc(" ",e.order.phone," "),o.Ab(4),o.Lc(" ",e.order.email," ")}}const J=function(e){return{isLoading:e}};function A(e,t){if(1&e&&(o.Ub(0,"div",2),o.Hc(1,z,27,5,"div",3),o.Hc(2,P,53,25,"div",4),o.Pb(3,"nz-spin",5),o.Tb()),2&e){const e=o.fc();o.mc("nzGutter",24),o.Ab(1),o.mc("ngIf",!e.isLoading),o.Ab(1),o.mc("ngIf",!e.isLoading),o.Ab(1),o.mc("ngClass",o.pc(5,J,e.isLoading))("nzSpinning",e.isLoading)}}function S(e,t){1&e&&o.Jc(0," not found order\n")}let I=(()=>{class e{constructor(e,t,n){this.messageService=e,this.activatedRoute=t,this.orderService=n,this.orderDetails=[],this.isLoading=!1,this.isHaveOrder=!0}ngOnInit(){this.activatedRoute.params.pipe(Object(c.a)(e=>{if(e.orderId)return this.isLoading=!0,this.orderId=e.orderId,this.orderService.getOrderDetails(this.orderId)})).subscribe(e=>{e.isSuccessed?(this.order=e.data,this.order.created_at=new Date(e.data.created_at),this.orderDetails=this.order.orderDetails):this.isHaveOrder=!1,this.isLoading=!1})}updateState(e,t){this.orderService.updateState(e,t).subscribe(e=>{e.isSuccessed&&(this.order.state=t,this.messageService.success("update state successfully"))})}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(i.b),o.Ob(a.a),o.Ob(l))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-order-detail"]],decls:3,vars:2,consts:[["nz-row","",3,"nzGutter",4,"ngIf","ngIfElse"],["notFound",""],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","16",4,"ngIf"],["nz-col","","nzSpan","8",4,"ngIf"],["nzSimple","",3,"ngClass","nzSpinning"],["nz-col","","nzSpan","16"],[1,"order-section","order-items"],[1,"title"],["nzBordered","","nzTableLayout","fixed",3,"nzFrontPagination","nzData"],["sortTable",""],["nzAlign","center","nzWidth","10%"],["nzAlign","center"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"order-section","notes"],[1,"content"],[3,"ngClass"],["nz-col","","nzSpan","8"],[1,"order-section","general-detail"],["class","update-status",4,"ngIf"],[1,"order-section","customer-infomation"],[1,"update-status"],["class","deliver",3,"click",4,"ngIf"],["class","complete",3,"click",4,"ngIf"],[1,"cancel",3,"click"],[1,"deliver",3,"click"],[1,"complete",3,"click"]],template:function(e,t){if(1&e&&(o.Hc(0,A,4,7,"div",0),o.Hc(1,S,1,0,"ng-template",null,1,o.Ic)),2&e){const e=o.uc(2);o.mc("ngIf",t.isHaveOrder)("ngIfElse",e)}},directives:[u.o,g.c,h.a,u.m,g.a,f.d,f.i,f.j,f.c,f.h,f.a,f.f,u.n],pipes:[u.d,u.f],styles:[".order-section[_ngcontent-%COMP%]{border:1px solid #dee2e6}.order-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;font-size:17px;font-weight:800;background:#fafafa;padding:10px;border-bottom:1px solid #dee2e6}.order-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.order-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:10px 15px}.order-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px}.order-section.order-items[_ngcontent-%COMP%], .order-section.order-items[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-bottom:none}.notes[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:150px}.general-detail[_ngcontent-%COMP%]{margin-bottom:32px}.general-detail[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%], .update-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:13px;padding:4px 8px}.update-status[_ngcontent-%COMP%]{margin-bottom:5px}.update-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{cursor:pointer}span.pending[_ngcontent-%COMP%]{background:#efe143}span.cancel[_ngcontent-%COMP%]{background:#e64646}span.deliver[_ngcontent-%COMP%]{background:#4380ef}span.complete[_ngcontent-%COMP%]{background:#5ede3e}"]}),e})();var y=n("q5vz"),L=n("C/7j"),M=n("WJhm"),E=n("66zS"),w=n("phDe"),_=n("px0D"),x=n("s7LF"),D=n("GaVp"),k=n("Jp/u");const F=function(e,t){return{odd:e,even:t}};function N(e,t){if(1&e){const e=o.Vb();o.Ub(0,"tr",15),o.Ub(1,"td",3),o.Jc(2),o.Tb(),o.Ub(3,"td",3),o.Jc(4),o.Tb(),o.Ub(5,"td",3),o.Jc(6),o.Tb(),o.Ub(7,"td",3),o.Jc(8),o.gc(9,"currency"),o.Tb(),o.Ub(10,"td",3),o.Jc(11),o.gc(12,"currency"),o.Tb(),o.Ub(13,"td",3),o.Jc(14),o.gc(15,"currency"),o.Tb(),o.Ub(16,"td",3),o.Ub(17,"img",16),o.bc("click",function(){o.wc(e);const n=t.$implicit;return o.fc().showQrCode(n.qrCode)}),o.Tb(),o.Tb(),o.Ub(18,"td",17),o.Ub(19,"button",18),o.bc("click",function(){o.wc(e);const n=t.$implicit;return o.fc().viewOrder(n.id)}),o.Jc(20,"View"),o.Pb(21,"i",19),o.Tb(),o.Tb(),o.Tb()}if(2&e){const e=t.$implicit;o.mc("ngClass",o.qc(14,F,t.odd,t.even)),o.Ab(2),o.Kc(e.id),o.Ab(2),o.Kc(e.customerName),o.Ab(2),o.Kc(e.state),o.Ab(2),o.Kc(o.hc(9,8,e.total)),o.Ab(3),o.Kc(o.hc(12,10,e.discount)),o.Ab(3),o.Kc(o.hc(15,12,e.shippingCost)),o.Ab(3),o.nc("src",e.qrCode,o.yc)}}const V=[{path:"",component:(()=>{class e extends y.a{constructor(e,t,n){super(e),this.orderService=e,this.nzImageService=t,this.router=n,this.filterState=[{text:"PENDING",value:"PENDING"},{text:"DELIVER",value:"DELIVER"},{text:"COMPLETE",value:"COMPLETE"},{text:"CANCEL",value:"CANCEL"}],this.onQueryParamsChange=e=>{this.baseParams.filters=[{key:"customerName",value:this.searchValue}],super.onQueryParamsChangeFromParent(e)}}ngOnInit(){}searchByName(){this.baseParams.filters=[{key:"customerName",value:this.searchValue}],super.search()}showQrCode(e){let t=[];t.push({src:e}),this.nzImageService.preview(t,{nzZoom:1,nzRotate:0})}viewOrder(e){this.router.navigate(["/admin/order/detail",e])}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(l),o.Ob(L.c),o.Ob(a.c))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-order-list"]],features:[o.xb],decls:33,vars:14,consts:[["nzBordered","","nzTableLayout","fixed",3,"nzFrontPagination","nzTotal","nzPageSize","nzPageIndex","nzLoading","nzData","nzQueryParams"],["sortTable",""],["nzAlign","center","nzWidth","7%","nzColumnKey","id",3,"nzSortFn"],["nzAlign","center"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],["nzAlign","center","nzColumnKey","state",3,"nzFilters","nzFilterFn"],["nzAlign","center","nzWidth","12%"],[3,"ngClass",4,"ngFor","ngForOf"],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small",3,"click"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],[3,"ngClass"],["height","50",3,"src","click"],["nzAlign","center",1,"btn-action"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline"]],template:function(e,t){if(1&e&&(o.Ub(0,"nz-table",0,1),o.bc("nzQueryParams",function(e){return t.onQueryParamsChange(e)}),o.Ub(2,"thead"),o.Ub(3,"tr"),o.Ub(4,"th",2),o.Jc(5,"Id"),o.Tb(),o.Ub(6,"th",3),o.Jc(7,"Customer "),o.Ub(8,"nz-filter-trigger",4),o.bc("nzVisibleChange",function(e){return t.isShowSearchInput=e}),o.Pb(9,"i",5),o.Tb(),o.Tb(),o.Ub(10,"th",6),o.Jc(11,"State"),o.Tb(),o.Ub(12,"th",3),o.Jc(13,"Total"),o.Tb(),o.Ub(14,"th",3),o.Jc(15,"Discount"),o.Tb(),o.Ub(16,"th",3),o.Jc(17,"Shipping"),o.Tb(),o.Ub(18,"th",3),o.Jc(19,"QR code"),o.Tb(),o.Ub(20,"th",7),o.Jc(21,"Action"),o.Tb(),o.Tb(),o.Tb(),o.Ub(22,"tbody"),o.Hc(23,N,22,17,"tr",8),o.Tb(),o.Tb(),o.Ub(24,"nz-dropdown-menu",null,9),o.Ub(26,"div",10),o.Ub(27,"div",11),o.Ub(28,"input",12),o.bc("ngModelChange",function(e){return t.searchValue=e}),o.Tb(),o.Ub(29,"button",13),o.bc("click",function(){return t.reset()}),o.Jc(30,"Reset"),o.Tb(),o.Ub(31,"button",14),o.bc("click",function(){return t.searchByName()}),o.Jc(32," Search "),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.uc(1),n=o.uc(25);o.mc("nzFrontPagination",!1)("nzTotal",t.total)("nzPageSize",t.baseParams.pageSize)("nzPageIndex",t.baseParams.pageIndex)("nzLoading",t.isLoading)("nzData",t.listData),o.Ab(4),o.mc("nzSortFn",!0),o.Ab(4),o.mc("nzVisible",t.isShowSearchInput)("nzActive",t.searchValue.length>0)("nzDropdownMenu",n),o.Ab(2),o.mc("nzFilters",t.filterState)("nzFilterFn",!0),o.Ab(13),o.mc("ngForOf",e.data),o.Ab(5),o.mc("ngModel",t.searchValue)}},directives:[f.d,f.i,f.j,f.c,f.h,f.a,f.g,f.b,M.a,E.a,f.f,u.n,w.c,_.a,x.d,x.m,x.o,D.a,k.a,u.m],pipes:[u.d],styles:[""]}),e})()},{path:"detail/:orderId",component:I}];let j=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(t){return new(t||e)},imports:[[u.c,a.f.forChild(V),r.a]]}),e})()}}]);